---
layout: cnblog_post
title:  "wx"
permalink: '/misc/wx'
date:   2018-11-25 07:34:39
categories: misc
---

##### 移动端登录流程

```
一 客户端发起请求获取code ,参数scope和state,返回code 


剩下的任务服务端处理较合适

二 用code 请求accesstoken
https://api.weixin.qq.com/sns/oauth2/access_token?appid=APPID&secret=SECRET&code=CODE&grant_type=authorization_code

返回
{
"access_token":"ACCESS_TOKEN",
"expires_in":7200,
"refresh_token":"REFRESH_TOKEN",
"openid":"OPENID",
"scope":"SCOPE"
}

三 使用accesstoken和openid调用微信接口：

/sns/userinfo 获取用户个人信息
https://api.weixin.qq.com/sns/userinfo?access_token=ACCESS_TOKEN&openid=OPENID


注意：客户端只最多只存储appid
```